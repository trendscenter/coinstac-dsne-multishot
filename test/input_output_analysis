#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Tue Feb 20 15:40:29 2018

@author: Harshvardhan
"""

# Results when run with np.random.seed(0)
# Note that the last output might not match with the output from the coinstac simulator although the same seed is used. But the idea is to demonstrate how the data transitions between the local and remote functions
#TODO I just realized I didn't pass the site labels from the local to python

# Input to local.py (Function: local_noop)
# noop stands for no-operation as the coinstac-simulator has been designed to
# start operation from the local/client

'{"input": {"shared_x":"shared_x1.txt", "shared_y":"shared_y1.txt","no_dims":2,"initial_dims":5,"perplexity": 5}}'

# Output from local.py (Function: local_noop)
"{'output': {'computation_phase': 'local_noop', 'no_dims': 2, 'initial_dims': 5, 'perplexity': 5}, 'cache': {'no_dims': 2, 'initial_dims': 5, 'perplexity': 5}}"

# Input to remote.py (Function: remote_1)
'{"input": {"local0": {"computation_phase": "local_noop", "no_dims": 2, "initial_dims": 5, "perplexity": 5}}, "cache": {}}'

#output from remote.py (Function: remote_1)
'{"output": {"shared_y": [[20.72600408265784, -121.15830305063503], [-37.48896987457671, -101.72936519930386], [684.0420350220697, 174.28594130350433], [-274.321858837746, 36.627141482078464], [63.34494725605613, -99.0590078930314], [42.42048815489053, -77.14342642720001], [-28.961085293061544, -145.26931836846182], [-73.12392795775395, 129.695091674741], [-130.76037199173163, 126.07901147188775], [-146.1538254357833, -46.60945305579223], [-54.276616008028505, -4.465580996867514], [48.14959463184984, 24.26953013287801], [-19.806033307549086, -54.324382753086084], [110.35448811456102, 60.25782986725285], [-112.17301405722762, 153.51719909513176], [92.06581624319104, -91.50207953356028], [132.1065846446595, -126.10152348482961], [39.24047098299538, -106.28075202089032], [-45.892401648488445, -22.84561148344394], [-136.8129851904281, -15.059562711433246], [6.458838937963288, -141.15060166139213], [112.39449147324532, -103.17347843546416], [92.2143551310597, 385.66354689489816], [-274.33636340611076, 53.88901650576998], [-109.41066166671371, 111.58813864724925]], "shared_x": [[-0.1967676767676768, -0.20767676767676763, 0.24969696969696975, -0.11595959595959593, 0.06585858585858584, 0.1975757575757574, -0.14747474747474748, -0.3434343434343434, 0.06060606060606055, -0.12444444444444452], [0.13656565656565656, 0.17616161616161619, -0.17454545454545445, -0.5098989898989899, 0.025454545454545396, 0.0763636363636363, 0.07474747474747467, -0.31313131313131315, 0.14141414141414144, 0.04727272727272719], [0.28808080808080805, 0.38828282828282834, -0.12404040404040395, 0.13656565656565656, -0.3381818181818182, -0.1761616161616163, -0.2888888888888889, -0.26262626262626265, -0.18181818181818182, 0.07757575757575746], [0.4496969696969697, -0.2581818181818181, 0.2597979797979799, 0.3486868686868687, -0.1866666666666667, 0.1470707070707069, 0.2464646464646464, -0.2828282828282829, 0.33333333333333337, -0.3870707070707071], [0.025454545454545396, 0.014545454545454639, -0.04323232323232312, -0.2674747474747475, 0.28808080808080805, -0.1660606060606062, -0.046464646464646486, -0.12121212121212122, 0.4949494949494949, 0.1684848484848484], [-0.38868686868686875, -0.33898989898989895, 0.3911111111111112, -0.2876767676767677, -0.1260606060606061, 0.1470707070707069, 0.25656565656565655, -0.10101010101010105, 0.24242424242424243, -0.053737373737373806], [0.11636363636363634, -0.03595959595959586, 0.35070707070707086, -0.014949494949494935, 0.10626262626262628, 0.06626262626262613, 0.06464646464646462, -0.1111111111111111, -0.4444444444444445, 0.15838383838383835], [0.18707070707070705, 0.3478787878787879, -0.4775757575757575, -0.29777777777777775, -0.25737373737373737, 0.2783838383838383, -0.2080808080808081, -0.10101010101010105, -0.01010101010101011, 0.08767676767676763], [0.38909090909090904, 0.2670707070707071, -0.03313131313131301, 0.378989898989899, 0.4698989898989899, 0.2783838383838383, 0.054545454545454564, 0.202020202020202, 0.09090909090909094, -0.3870707070707071], [-0.26747474747474753, 0.2670707070707071, -0.5179797979797979, -0.15636363636363637, 0.055757575757575784, 0.0763636363636363, 0.13535353535353534, 0.4949494949494949, 0.3434343434343434, 0.2694949494949494], [0.3183838383838383, -0.33898989898989895, -0.15434343434343423, 0.33858585858585855, 0.378989898989899, 0.3187878787878786, 0.014141414141414121, -0.09090909090909094, -0.26262626262626265, 0.522020202020202], [0.04565656565656562, 0.1458585858585859, -0.1947474747474746, -0.35838383838383836, 0.025454545454545396, -0.5397979797979799, 0.23636363636363633, 0.030303030303030276, -0.08080808080808083, 0.037171717171717134], [-0.3785858585858586, -0.43999999999999995, 0.26989898989898997, -0.08565656565656565, 0.20727272727272728, -0.05494949494949508, -0.3797979797979798, 0.4444444444444444, -0.21212121212121215, 0.4917171717171716], [-0.2270707070707071, 0.43878787878787884, -0.17454545454545445, 0.36888888888888893, 0.08606060606060606, 0.3793939393939393, 0.2161616161616161, 0.404040404040404, -0.31313131313131315, -0.17494949494949502], [0.18707070707070705, -0.48040404040404033, -0.5179797979797979, 0.3284848484848485, -0.4391919191919192, -0.5195959595959597, 0.2161616161616161, 0.4444444444444444, -0.06060606060606061, -0.3163636363636364], [-0.38868686868686875, -0.05616161616161608, -0.12404040404040395, -0.12606060606060604, 0.2981818181818182, -0.4993939393939395, -0.12727272727272732, 0.1717171717171717, 0.4242424242424242, -0.1446464646464647], [-0.47959595959595963, -0.015757575757575637, 0.4214141414141416, 0.005252525252525286, -0.3381818181818182, -0.19636363636363646, 0.4181818181818181, -0.01010101010101011, 0.2525252525252525, -0.44767676767676773], [-0.43919191919191924, 0.004444444444444473, 0.2901010101010102, -0.20686868686868687, 0.11636363636363634, 0.09656565656565641, -0.18787878787878792, -0.35353535353535354, 0.23232323232323226, 0.1179797979797979], [0.30828282828282827, -0.5410101010101009, -0.13414141414141406, -0.18666666666666665, 0.005252525252525286, 0.005656565656565582, -0.47070707070707074, 0.26262626262626265, -0.4444444444444445, 0.23919191919191912], [0.015353535353535341, 0.28727272727272735, -0.1947474747474746, -0.29777777777777775, 0.04565656565656562, 0.33898989898989884, -0.1676767676767677, 0.4242424242424242, -0.38383838383838387, -0.25575757575757585], [-0.31797979797979803, 0.18626262626262635, 0.1385858585858587, 0.3486868686868687, 0.48, 0.04606060606060591, 0.4181818181818181, -0.3232323232323232, -0.20202020202020204, 0.3907070707070706], [-0.3987878787878788, -0.015757575757575637, 0.14868686868686876, -0.0755555555555556, -0.48969696969696974, -0.06505050505050514, -0.2181818181818182, -0.14141414141414144, 0.13131313131313127, -0.2153535353535354], [0.3284848484848485, -0.21777777777777768, 0.4214141414141416, 0.18707070707070705, 0.30828282828282827, -0.40848484848484856, -0.4505050505050505, -0.37373737373737376, -0.31313131313131315, -0.17494949494949502], [0.2678787878787878, -0.025858585858585803, -0.03313131313131301, 0.3486868686868687, -0.50989898989899, 0.03595959595959586, 0.37777777777777777, -0.41414141414141414, 0.2222222222222222, 0.532121212121212], [0.4193939393939393, 0.448888888888889, -0.04323232323232312, 0.19717171717171722, -0.2775757575757576, 0.13696969696969685, -0.036363636363636376, 0.46464646464646464, -0.06060606060606061, -0.45777777777777784]], "computation_phase": "remote_1"}, "cache": {}}'

# Input to local.py (Function: local_1)
'{"input": {"shared_y": [[20.72600408265784, -121.15830305063503], [-37.48896987457671, -101.72936519930386], [684.0420350220697, 174.28594130350433], [-274.321858837746, 36.627141482078464], [63.34494725605613, -99.0590078930314], [42.42048815489053, -77.14342642720001], [-28.961085293061544, -145.26931836846182], [-73.12392795775395, 129.695091674741], [-130.76037199173163, 126.07901147188775], [-146.1538254357833, -46.60945305579223], [-54.276616008028505, -4.465580996867514], [48.14959463184984, 24.26953013287801], [-19.806033307549086, -54.324382753086084], [110.35448811456102, 60.25782986725285], [-112.17301405722762, 153.51719909513176], [92.06581624319104, -91.50207953356028], [132.1065846446595, -126.10152348482961], [39.24047098299538, -106.28075202089032], [-45.892401648488445, -22.84561148344394], [-136.8129851904281, -15.059562711433246], [6.458838937963288, -141.15060166139213], [112.39449147324532, -103.17347843546416], [92.2143551310597, 385.66354689489816], [-274.33636340611076, 53.88901650576998], [-109.41066166671371, 111.58813864724925]], "shared_x": [[-0.1967676767676768, -0.20767676767676763, 0.24969696969696975, -0.11595959595959593, 0.06585858585858584, 0.1975757575757574, -0.14747474747474748, -0.3434343434343434, 0.06060606060606055, -0.12444444444444452], [0.13656565656565656, 0.17616161616161619, -0.17454545454545445, -0.5098989898989899, 0.025454545454545396, 0.0763636363636363, 0.07474747474747467, -0.31313131313131315, 0.14141414141414144, 0.04727272727272719], [0.28808080808080805, 0.38828282828282834, -0.12404040404040395, 0.13656565656565656, -0.3381818181818182, -0.1761616161616163, -0.2888888888888889, -0.26262626262626265, -0.18181818181818182, 0.07757575757575746], [0.4496969696969697, -0.2581818181818181, 0.2597979797979799, 0.3486868686868687, -0.1866666666666667, 0.1470707070707069, 0.2464646464646464, -0.2828282828282829, 0.33333333333333337, -0.3870707070707071], [0.025454545454545396, 0.014545454545454639, -0.04323232323232312, -0.2674747474747475, 0.28808080808080805, -0.1660606060606062, -0.046464646464646486, -0.12121212121212122, 0.4949494949494949, 0.1684848484848484], [-0.38868686868686875, -0.33898989898989895, 0.3911111111111112, -0.2876767676767677, -0.1260606060606061, 0.1470707070707069, 0.25656565656565655, -0.10101010101010105, 0.24242424242424243, -0.053737373737373806], [0.11636363636363634, -0.03595959595959586, 0.35070707070707086, -0.014949494949494935, 0.10626262626262628, 0.06626262626262613, 0.06464646464646462, -0.1111111111111111, -0.4444444444444445, 0.15838383838383835], [0.18707070707070705, 0.3478787878787879, -0.4775757575757575, -0.29777777777777775, -0.25737373737373737, 0.2783838383838383, -0.2080808080808081, -0.10101010101010105, -0.01010101010101011, 0.08767676767676763], [0.38909090909090904, 0.2670707070707071, -0.03313131313131301, 0.378989898989899, 0.4698989898989899, 0.2783838383838383, 0.054545454545454564, 0.202020202020202, 0.09090909090909094, -0.3870707070707071], [-0.26747474747474753, 0.2670707070707071, -0.5179797979797979, -0.15636363636363637, 0.055757575757575784, 0.0763636363636363, 0.13535353535353534, 0.4949494949494949, 0.3434343434343434, 0.2694949494949494], [0.3183838383838383, -0.33898989898989895, -0.15434343434343423, 0.33858585858585855, 0.378989898989899, 0.3187878787878786, 0.014141414141414121, -0.09090909090909094, -0.26262626262626265, 0.522020202020202], [0.04565656565656562, 0.1458585858585859, -0.1947474747474746, -0.35838383838383836, 0.025454545454545396, -0.5397979797979799, 0.23636363636363633, 0.030303030303030276, -0.08080808080808083, 0.037171717171717134], [-0.3785858585858586, -0.43999999999999995, 0.26989898989898997, -0.08565656565656565, 0.20727272727272728, -0.05494949494949508, -0.3797979797979798, 0.4444444444444444, -0.21212121212121215, 0.4917171717171716], [-0.2270707070707071, 0.43878787878787884, -0.17454545454545445, 0.36888888888888893, 0.08606060606060606, 0.3793939393939393, 0.2161616161616161, 0.404040404040404, -0.31313131313131315, -0.17494949494949502], [0.18707070707070705, -0.48040404040404033, -0.5179797979797979, 0.3284848484848485, -0.4391919191919192, -0.5195959595959597, 0.2161616161616161, 0.4444444444444444, -0.06060606060606061, -0.3163636363636364], [-0.38868686868686875, -0.05616161616161608, -0.12404040404040395, -0.12606060606060604, 0.2981818181818182, -0.4993939393939395, -0.12727272727272732, 0.1717171717171717, 0.4242424242424242, -0.1446464646464647], [-0.47959595959595963, -0.015757575757575637, 0.4214141414141416, 0.005252525252525286, -0.3381818181818182, -0.19636363636363646, 0.4181818181818181, -0.01010101010101011, 0.2525252525252525, -0.44767676767676773], [-0.43919191919191924, 0.004444444444444473, 0.2901010101010102, -0.20686868686868687, 0.11636363636363634, 0.09656565656565641, -0.18787878787878792, -0.35353535353535354, 0.23232323232323226, 0.1179797979797979], [0.30828282828282827, -0.5410101010101009, -0.13414141414141406, -0.18666666666666665, 0.005252525252525286, 0.005656565656565582, -0.47070707070707074, 0.26262626262626265, -0.4444444444444445, 0.23919191919191912], [0.015353535353535341, 0.28727272727272735, -0.1947474747474746, -0.29777777777777775, 0.04565656565656562, 0.33898989898989884, -0.1676767676767677, 0.4242424242424242, -0.38383838383838387, -0.25575757575757585], [-0.31797979797979803, 0.18626262626262635, 0.1385858585858587, 0.3486868686868687, 0.48, 0.04606060606060591, 0.4181818181818181, -0.3232323232323232, -0.20202020202020204, 0.3907070707070706], [-0.3987878787878788, -0.015757575757575637, 0.14868686868686876, -0.0755555555555556, -0.48969696969696974, -0.06505050505050514, -0.2181818181818182, -0.14141414141414144, 0.13131313131313127, -0.2153535353535354], [0.3284848484848485, -0.21777777777777768, 0.4214141414141416, 0.18707070707070705, 0.30828282828282827, -0.40848484848484856, -0.4505050505050505, -0.37373737373737376, -0.31313131313131315, -0.17494949494949502], [0.2678787878787878, -0.025858585858585803, -0.03313131313131301, 0.3486868686868687, -0.50989898989899, 0.03595959595959586, 0.37777777777777777, -0.41414141414141414, 0.2222222222222222, 0.532121212121212], [0.4193939393939393, 0.448888888888889, -0.04323232323232312, 0.19717171717171722, -0.2775757575757576, 0.13696969696969685, -0.036363636363636376, 0.46464646464646464, -0.06060606060606061, -0.45777777777777784]], "computation_phase": "remote_1"}, "cache": {"no_dims": 2, "initial_dims": 5, "perplexity": 5}}'

# Output from local.py (Function: local_1)
'{"output": {"computation_phase": "local_site", "local_embedding": [[-25.621822891209053, 72.72200202811852], [125.89746703969634, 144.6872852332177], [48.22330362126172, 85.25505742647805], [52.57733093942573, 101.9708143122909], [110.33196734807306, 141.33953115894093], [-15.31207835392643, 87.19089990678142], [59.76330888309705, 120.93293747997053], [122.9780781276748, 26.863504338834357], [66.95330586483976, 109.07592733721258], [68.97897841543882, 129.34741045412784], [-1036.2535649302285, -1582.3444443120861], [121.83204314247745, 156.51292364931516], [11.10405049748601, 6.254822643803165], [103.2038523390106, 132.81063239930816], [-28.19644272533834, -33.47999542533146], [6.077826547268421, 41.86469868734344], [14.598876627474423, 22.47816769367146], [17.203395116312297, 36.53233308881133], [-17.00408576270912, -28.220393166379008], [-27.686069406985478, 83.72637448033437], [110.63455931236692, 23.510359861162545], [-9.188669356852232, -20.382230372920525], [41.46800275381745, 97.79261716747145], [75.8506434681669, 51.56938469099008], [1.585743383361503, -8.010620761466743]]}, "cache": {}}'

# Input to remote.py (remote_2)
'{"input": {"local0": {"computation_phase": "local_site", "local_embedding": [[-25.621822891209053, 72.72200202811852], [125.89746703969634, 144.6872852332177], [48.22330362126172, 85.25505742647805], [52.57733093942573, 101.9708143122909], [110.33196734807306, 141.33953115894093], [-15.31207835392643, 87.19089990678142], [59.76330888309705, 120.93293747997053], [122.9780781276748, 26.863504338834357], [66.95330586483976, 109.07592733721258], [68.97897841543882, 129.34741045412784], [-1036.2535649302285, -1582.3444443120861], [121.83204314247745, 156.51292364931516], [11.10405049748601, 6.254822643803165], [103.2038523390106, 132.81063239930816], [-28.19644272533834, -33.47999542533146], [6.077826547268421, 41.86469868734344], [14.598876627474423, 22.47816769367146], [17.203395116312297, 36.53233308881133], [-17.00408576270912, -28.220393166379008], [-27.686069406985478, 83.72637448033437], [110.63455931236692, 23.510359861162545], [-9.188669356852232, -20.382230372920525], [41.46800275381745, 97.79261716747145], [75.8506434681669, 51.56938469099008], [1.585743383361503, -8.010620761466743]]}}, "cache": {}}'

# Output from remote.py (Function: remote_2)
'{"output": {"final_embedding": [[-25.621822891209053, 72.72200202811852], [125.89746703969634, 144.6872852332177], [48.22330362126172, 85.25505742647805], [52.57733093942573, 101.9708143122909], [110.33196734807306, 141.33953115894093], [-15.31207835392643, 87.19089990678142], [59.76330888309705, 120.93293747997053], [122.9780781276748, 26.863504338834357], [66.95330586483976, 109.07592733721258], [68.97897841543882, 129.34741045412784], [-1036.2535649302285, -1582.3444443120861], [121.83204314247745, 156.51292364931516], [11.10405049748601, 6.254822643803165], [103.2038523390106, 132.81063239930816], [-28.19644272533834, -33.47999542533146], [6.077826547268421, 41.86469868734344], [14.598876627474423, 22.47816769367146], [17.203395116312297, 36.53233308881133], [-17.00408576270912, -28.220393166379008], [-27.686069406985478, 83.72637448033437], [110.63455931236692, 23.510359861162545], [-9.188669356852232, -20.382230372920525], [41.46800275381745, 97.79261716747145], [75.8506434681669, 51.56938469099008], [1.585743383361503, -8.010620761466743]]}, "success": true}'